#!/usr/bin/env node

var program = require('commander');
var B = require('blabot-core');
var fs = require('fs');

var dictionaryName, wordsCount = 1;

program
  .usage('<n> <dictionary>')
  .arguments('<n> <dictionary>')
  .action(function (count, dictionary) {
    wordsCount = count;
    dictionaryName = dictionary;
  })
  .parse(process.argv);

if (typeof dictionaryName === 'undefined') {
  program.outputHelp();
  process.exit(1);
}

if (isNaN(wordsCount)) {
  console.error('\n  Error: Count of words must be a number\n');
  process.exit(1);
}

if (!fs.existsSync(dictionaryName)) {
  console.error('\n  Error: Canâ€™t find file \'' + dictionaryName + '\'\n');
  process.exit(1);
}

var dict = JSON.parse(fs.readFileSync(dictionaryName, 'utf-8'));

console.log(B.getWords(dict, wordsCount).join('\n'));
